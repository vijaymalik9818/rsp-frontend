<?php

namespace App\Models;

use Illuminate\Database\Eloquent\Model;
use Illuminate\Database\Eloquent\Factories\HasFactory;

class Property extends Model
{
    use HasFactory;

    protected $fillable = [
        'accessibility_features',
        'accessto_property',
        'acreage_yn',
        'acres_fenced',
        'acres_pasture',
        'additional_cost_amount',
        'additional_parcels_yn',
        'addl_costs_payment_freq',
        'appliances',
        'architectural_style',
        'association2_yn',
        'association_amenities',
        'association_fee',
        'association_fee2',
        'association_fee2_frequency',
        'association_fee_frequency',
        'association_fee_includes',
        'association_yn',
        'availability_date',
        'based_on_year',
        'basement',
        'bathrooms_full',
        'bathrooms_half',
        'bathrooms_total_integer',
        'bedrms_above_grade',
        'bedrooms_below_grade',
        'bedrooms_total',
        'below_grade_finished_area',
        'below_grade_finished_area_units',
        'builder_name',
        'building_area_total',
        'building_area_total_metres',
        'building_area_total_sf',
        'building_name',
        'building_type',
        'buildings_list',
        'business_name',
        'business_price_includes',
        'business_type',
        'business_yn',
        'buyer_office_aor',
        'carport_spaces',
        'city',
        'clear_ceiling_ht_feet',
        'co_buyer_office_aor',
        'co_list_agent_direct_phone',
        'co_list_agent_email',
        'co_list_agent_full_name',
        'co_list_agent_key_numeric',
        'co_list_agent_mls_id',
        'co_list_agent_mobile_phone',
        'co_list_agent_national_association_id',
        'co_list_office_aor',
        'co_list_office_email',
        'co_list_office_key_numeric',
        'co_list_office_mls_id',
        'co_list_office_name',
        'co_list_office_national_association_id',
        'co_list_office_phone',
        'co_list_office_phone_ext',
        'commercial_amenities',
        'common_walls',
        'community_features',
        'complex_name',
        'condo_name',
        'condotype',
        'construction_materials',
        'cooling',
        'county_or_parish',
        'current_use',
        'days_on_market',
        'direction_faces',
        'district',
        'dom_date',
        'dom_incrementing',
        'electric',
        'elementary_school_district',
        'ensuite_yn',
        'entry_level',
        'exterior_features',
        'fencing',
        'fireplace_features',
        'fireplaces_total',
        'five_piece_bath',
        'five_piece_ensuite_bath',
        'floor_location',
        'flooring',
        'footprint_sqft',
        'foundation_details',
        'four_piece_bath',
        'four_piece_ensuite_bath',
        'frontage_ft',
        'frontage_length',
        'furnished',
        'garage_spaces',
        'garage_yn',
        'gross_margin',
        'heating',
        'heating_expense',
        'high_school_district',
        'idx_opt_in_yn',
        'inclusions',
        'interior_features',
        'internet_entire_listing_display_yn',
        'land_lease_amount',
        'latitude',
        'laundry_features',
        'laundry_income',
        'lease_amount',
        'lease_amount_frequency',
        'lease_count',
        'lease_measure',
        'lease_measure_type',
        'lease_rate_sq_meter',
        'lease_sub_lease_yn',
        'lease_term',
        'lease_term_remaining_months',
        'legal_plan',
        'legal_unit_number',
        'levels',
        'list_agent_direct_phone',
        'list_agent_email',
        'list_agent_full_name',
        'list_agent_key_numeric',
        'list_agent_mls_id',
        'list_aor',
        'list_office_aor',
        'list_office_key_numeric',
        'list_office_mls_id',
        'list_office_name',
        'list_office_phone',
        'list_office_phone_ext',
        'list_price',
        'list_price_square_foot',
        'listing_contract_date',
        'listing_id',
        'listing_key_numeric',
        'listing_service',
        'living_area_metres',
        'living_area_sf',
        'longitude',
        'lot_features',
        'lot_size_acres',
        'lot_size_dimensions',
        'lot_size_not_cultivated',
        'lot_size_seeded',
        'lot_size_square_feet',
        'lot_size_tame_hay',
        'lot_size_treed',
        'main_level_finished_area',
        'main_level_finished_area_metres',
        'main_level_finished_area_sf',
        'main_level_finished_area_srch_sq_ft',
        'main_level_finished_area_units',
        'major_change_timestamp',
        'major_change_type',
        'major_use_description',
        'map_url',
        'mezzanine_sqft',
        'mls_status',
        'mobile_length',
        'mobile_width',
        'modification_timestamp',
        'monthly_rent',
        'multi_family_type',
        'nearest_town',
        'new_construction_yn',
        'nine_one_one_address',
        'occupancy_costs',
        'one_piece_bath',
        'open_house_count',
        'originating_system_name',
        'outbuildings',
        'outbuildings_desc',
        'owner_pays',
        'parking_assigned',
        'parking_common_spaces',
        'parking_enclosed',
        'parking_energized',
        'parking_features',
        'parking_plan_type',
        'parking_total',
        'patio_and_porch_features',
        'pets_allowed',
        'photos_change_timestamp',
        'photos_count',
        'pool_features',
        'postal_code',
        'property_sub_type',
        'property_type',
        'public_remarks',
        'quarter',
        'range',
        'rent_includes',
        'rental_type',
        'restrictions',
        'roof',
        'rooms_above_grade',
        'rooms_total',
        'school_bus_service_yn',
        'section',
        'security_deposit_yn',
        'sewer',
        'six_piece_bath',
        'six_piece_ensuite_bath',
        'soil_type',
        'special_listing_conditions',
        'sqft_other',
        'sqft_retail',
        'sqft_warehouse',
        'sqft_office',
        'sqft_old',
        'standard_status',
        'state_or_province',
        'stories_total',
        'street_dir_prefix',
        'street_dir_suffix',
        'street_direction',
        'street_name',
        'street_number',
        'street_suffix',
        'structure_type',
        'subdivision_name',
        'suite',
        'tax_block',
        'tax_key_numeric',
        'tax_legal_description',
        'tax_lot',
        'tenant_pays',
        'three_piece_bath',
        'three_piece_ensuite_bath',
        'title_land',
        'township',
        'transaction_type',
        'two_piece_bath',
        'two_piece_ensuite_bath',
        'unit_exposure',
        'unit_number',
        'units_count',
        'unparsed_address',
        'upper_level_finished_area',
        'upper_level_finished_area_metres',
        'upper_level_finished_area_sf',
        'upper_level_finished_area_srch_sq_ft',
        'upper_level_finished_area_units',
        'url_3d_image',
        'url_additional_images',
        'url_alternate_feature_sheet',
        'url_brochure',
        'url_sound_byte',
        'utilities',
        'virtual_tour_url_branded',
        'virtual_tour_url_unbranded',
        'water_source',
        'waterfront_features',
        'west_meridian',
        'yard_faces',
        'yard_size',
        'year_built',
        'year_built_exception',
        'year_established',
        'zoning',
    ];

    protected static function newFactory()
    {
        return \Database\factories\PropertyFactory::new();
    }

    public function assigned_property(){
        return $this->belongsTo(RealtorPropertyMapping::class,'id','property_id');
    }

    public function featured(){
        return $this->belongsTo(FeaturedProperty::class,'id','property_id');
    }

    public function diamond(){
        return $this->belongsTo(DiamondProperty::class,'id','property_id');
    }

    protected static function booted()
    {
        static::addGlobalScope('active', function ($builder) {
            $builder->where('image_status', 1);
        });
    }

    public function professionals(){
        return $this->belongsTo(OurProfessional::class,'property_id','id');
    }
}
